{"ast":null,"code":"var _jsxFileName = \"/Users/keqinyang/Desktop/Kevin-Chat-Room/chatapp/src/pages/Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Typography } from '@mui/material';\nimport LoginStyle from './LoginStyle';\nimport { Link, useNavigate } from 'react-router-dom';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { ToastContainer, toast } from \"react-toastify\";\nimport axios from 'axios';\nimport { loginRoute } from '../api/ApiRoutes';\nimport { useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const classes = LoginStyle();\n  const navigate = useNavigate();\n  const [loginInfo, setLoginInfo] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  useEffect(() => {\n    if (localStorage.getItem('chat-app-user')) {\n      setLoginInfo({ ...loginInfo,\n        username: JSON.parse(localStorage.getItem('chat-app-user')).username\n      });\n    }\n  }, []);\n  const toastOptions = {\n    position: \"bottom-right\",\n    autoClose: 5000,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    theme: \"light\"\n  };\n\n  const validate = () => {\n    if (loginInfo.username.length < 5) {\n      toast.error(\"Username must have at least 5 characters\", toastOptions);\n      return false;\n    } else if (loginInfo.password.length < 8) {\n      toast.error(\"Password must have at least 8 characters\", toastOptions);\n      return false;\n    } else {\n      return true;\n    }\n  };\n\n  const handleWrite = e => {\n    setLoginInfo({ ...loginInfo,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async e => {\n    if (validate()) {\n      const {\n        data\n      } = await axios.post(loginRoute, loginInfo);\n\n      if (data.status === false) {\n        toast.error(data.msg, toastOptions);\n      }\n\n      if (data.status === true) {\n        localStorage.setItem('chat-app-user-logined', JSON.stringify(data.user));\n        localStorage.setItem('chat-app-user', JSON.stringify({\n          username: loginInfo.username\n        }));\n\n        if (data.user.isAvatarImageSet === false) {\n          navigate(\"/setpersonal\");\n        } else {\n          navigate(\"/chat\");\n        }\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.Overall,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.Box,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        color: \"#500979\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: classes.Input,\n        type: \"text\",\n        name: \"username\",\n        placeholder: \"Username\",\n        value: loginInfo.username,\n        onChange: handleWrite\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: classes.Input,\n        type: \"password\",\n        placeholder: \"Password\",\n        name: \"password\",\n        value: loginInfo.password,\n        onChange: handleWrite\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: classes.Button,\n        onClick: handleSubmit,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h7\",\n        color: \"#500979\",\n        children: [\"New User? \", /*#__PURE__*/_jsxDEV(Link, {\n          className: classes.Link,\n          to: \"/register\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 60\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"bIKxKyqfTADiynF/eQ1nGW5VrPU=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","Typography","LoginStyle","Link","useNavigate","ToastContainer","toast","axios","loginRoute","useEffect","Login","classes","navigate","loginInfo","setLoginInfo","username","password","localStorage","getItem","JSON","parse","toastOptions","position","autoClose","closeOnClick","pauseOnHover","draggable","theme","validate","length","error","handleWrite","e","target","name","value","handleSubmit","data","post","status","msg","setItem","stringify","user","isAvatarImageSet","Overall","Box","Input","Button"],"sources":["/Users/keqinyang/Desktop/Kevin-Chat-Room/chatapp/src/pages/Login.jsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { Typography } from '@mui/material'\nimport LoginStyle from './LoginStyle'\nimport { Link, useNavigate } from 'react-router-dom'\nimport 'react-toastify/dist/ReactToastify.css';\nimport { ToastContainer, toast } from \"react-toastify\"\nimport axios from 'axios'\nimport { loginRoute } from '../api/ApiRoutes';\nimport { useEffect } from 'react';\nconst Login = () => {\n\n  const classes = LoginStyle();\n  const navigate = useNavigate();\n\n  const [loginInfo, setLoginInfo] = useState({\n    username: \"\",\n    password: \"\",\n  });\n\n  useEffect(() => {\n    if(localStorage.getItem('chat-app-user')){\n      setLoginInfo({...loginInfo,\n        username: JSON.parse(localStorage.getItem('chat-app-user')).username,\n      })\n    }\n  }, [])\n\n  const toastOptions = {\n    position: \"bottom-right\",\n    autoClose: 5000,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    theme: \"light\"\n  };\n\n  const validate = () => {\n    if (loginInfo.username.length < 5) {\n      toast.error(\"Username must have at least 5 characters\", toastOptions);\n      return false;\n    }\n    else if (loginInfo.password.length < 8) {\n      toast.error(\"Password must have at least 8 characters\", toastOptions);\n      return false;\n    }\n    else {\n      return true;\n    }\n  }\n\n  const handleWrite = (e) => {\n    setLoginInfo({...loginInfo, [e.target.name]: e.target.value})\n  }\n\n  const handleSubmit = async (e) => {\n    if(validate()){\n      const { data } = await axios.post(loginRoute, loginInfo);\n      if(data.status === false){\n          toast.error(data.msg, toastOptions);\n      }\n      if(data.status === true){\n          localStorage.setItem('chat-app-user-logined', JSON.stringify(data.user));\n          localStorage.setItem('chat-app-user', JSON.stringify({\n            username: loginInfo.username,\n        }));\n          if(data.user.isAvatarImageSet === false){\n            navigate(\"/setpersonal\");\n          }\n          else{\n            navigate(\"/chat\");\n          }\n      }\n    }\n  }\n\n  return (\n    <div className={classes.Overall}>\n      <div className={classes.Box}>\n        <Typography variant='h4' color=\"#500979\">\n          Login\n        </Typography>\n        <input\n          className={classes.Input}\n          type=\"text\"\n          name='username'\n          placeholder='Username'\n          value={loginInfo.username}\n          onChange={handleWrite}\n        />\n        <input\n          className={classes.Input}\n          type=\"password\"\n          placeholder='Password'\n          name='password'\n          value={loginInfo.password}\n          onChange={handleWrite}\n        />\n        <button className={classes.Button} onClick={handleSubmit}>Login</button>\n        <Typography variant='h7' color=\"#500979\">New User? <Link className={classes.Link} to='/register'>Register</Link></Typography>\n      </div>\n      <ToastContainer />\n    </div>\n\n  )\n}\n\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module"}